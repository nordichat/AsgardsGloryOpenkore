automacro auto_loot_activation {
    run-once 1
    exclusive 1
    call enable_autoloot
}

macro enable_autoloot {
    do c @autoloot 100
}

automacro monsterRefresh {
    monster /NPC/, /NPC Unknown/
    call {
        do c @refresh
        do e hmm
        $msgToSend = @random ("Weird stuff... panic refresh!", "Something's off... hitting @refresh!", "Is this a bug or a feature? Refreshing!", "I don't trust what I just saw. @refresh!", "Reality is glitching. Time to press refresh!", "Classic fix: turn it off and on again!", "Saw something cursed. Cleansing with @refresh!", "If I ignore it and refresh, it never happened!", "Not sure if lag or hallucination. @refresh!", "Me: *sees weird stuff* Also me: *smashes refresh*")
        do p $msgToSend
    }
    timeout 3
}

automacro goHeal {
    hp < 15%
    call {
        do ai manual
        do e omg
        $msgToSend = @random ("MEDIC! I'm dying! Retreating to base!", "Ow ow ow! Time for a tactical retreat!", "I regret all my life choices... running to heal!", "Survival instinct activated! Fleeing to town!", "Nope nope nope! I need a healer!", "BRB, patching myself up before I actually die.")
        do p $msgToSend
        do p @go geffen
        pause 2
        do move 120 70
        pause 1
        do talk @npc(/Healer/)
        do e lv2
        $msgToSend = @random ("I LIVE! Back to the battlefield!", "Patched up and ready to rumble again!", "The gods still have plans for me!", "Fully restored! Now where were we?", "Ah, sweet healing. Now back to work!", "Alright, break's over. Time to hunt again!")
        do p $msgToSend
        do ai auto
    }
    timeout 60
}

automacro check_party_leader {
    exclusive 1
    timeout 600
    call verify_party_leader
}

macro verify_party_leader {
    # Count number of party members
    $numberOfPlayers = @eval(scalar @partyUsersID)
    $i = 0
    while ($i < $numberOfPlayers) as loop
        $charname = @eval($::char->{'name'})
        $charnameParty = @eval($::char->{'party'}{'users'}{@partyUsersID[$i]}{'name'})
        $isAdmin = @eval($::char->{'party'}{'users'}{@partyUsersID[$i]}{'admin'})

        if ($isAdmin == 1) {
            if ($charname == $charnameParty) {
                $msgToSend = @random ("He who has a why to live can bear almost any how. - Friedrich Nietzsche", "No tree, it is said, can grow to heaven unless its roots reach down to hell. - Carl Jung", "Talent hits a target no one else can hit; Genius hits a target no one else can see. - Arthur Schopenhauer", "Man is not the lord of beings. Man is the shepherd of Being. - Martin Heidegger", "Life can only be understood backwards; but it must be lived forwards. - Søren Kierkegaard", "Man is condemned to be free. - Jean-Paul Sartre", "Madness is the exception in individuals but the rule in groups. - Friedrich Nietzsche", "Your visions will become clear only when you look into your own heart. - Carl Jung", "A man can do what he wants, but not want what he wants. - Arthur Schopenhauer", "Being-in-the-world is not a property of the subject, but a fundamental existential structure. - Martin Heidegger", "The function of prayer is not to influence God, but rather to change the nature of the one who prays. - Søren Kierkegaard", "We do not see things as they are, we see them as we are. - Michel Foucault", "The privilege of a lifetime is being who you are. - Joseph Campbell", "The greatest burden a child must bear is the unlived life of the parents. - Carl Jung", "The mind is its own place and in itself, can make a heaven of hell, a hell of heaven. - John Milton", "A good traveler has no fixed plans and is not intent on arriving. - Lao Tzu", "The cave you fear to enter holds the treasure you seek. - Joseph Campbell", "To live is to suffer, to survive is to find some meaning in the suffering. - Friedrich Nietzsche", "Everything that irritates us about others can lead us to an understanding of ourselves. - Carl Jung", "The task is not to see what no one has yet seen, but to think what nobody has yet thought about that which everybody sees. - Erich Neumann", "If you gaze long into an abyss, the abyss also gazes into you. - Friedrich Nietzsche", "The meeting of two personalities is like the contact of two chemical substances: if there is any reaction, both are transformed. - Carl Jung", "The happiness of your life depends upon the quality of your thoughts. - Marcus Aurelius", "Anxiety is the dizziness of freedom. - Søren Kierkegaard", "He who opens a school door, closes a prison. - Michel Foucault", "We must be willing to get rid of the life we've planned, so as to have the life that is waiting for us. - Joseph Campbell", "The moment one commits oneself, then Providence moves too. - Johann Wolfgang von Goethe", "The world is not comprehensible, but it is embraceable. - Martin Buber", "You become what you give your attention to. - Epictetus", "The only way to deal with this life is to find a way to transcend it. - Mircea Eliade", "One repays a teacher badly if one remains only a pupil. - Friedrich Nietzsche", "Without imperfection, neither you nor I would exist. - Stephen Hawking", "No one saves us but ourselves. No one can and no one may. We ourselves must walk the path. - Buddha", "Faith consists in believing when it is beyond the power of reason to believe. - Voltaire", "Every man is born as many men and dies as a single one. - Martin Heidegger", "One must still have chaos in oneself to give birth to a dancing star. - Friedrich Nietzsche", "To dare is to lose one's footing momentarily. Not to dare is to lose oneself. - Søren Kierkegaard", "People only see what they are prepared to see. - Ralph Waldo Emerson", "Freedom is what you do with what’s been done to you. - Jean-Paul Sartre", "Happiness is the highest good. - Aristotle", "Every form of addiction is bad, no matter whether the narcotic be alcohol, morphine, or idealism. - Carl Jung", "A thinker sees his own actions as experiments and questions—as attempts to find out something. - Friedrich Nietzsche", "Where your fear is, there is your task. - Carl Jung", "History is a set of lies agreed upon. - Michel Foucault", "To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment. - Ralph Waldo Emerson", "You must have chaos within you to give birth to a dancing star. - Friedrich Nietzsche")
                do p $msgToSend
                call save_expoutput
            } else {
                $num = @rand(1, 4)
                if ($num == 1) {
                    do e sry
                }
                if ($num == 2) {
                    do e heh
                }
                if ($num == 3) {
                    do e gg
                }
                if ($num == 4) {
                    do e meh
                }
            }
        }
        $i++
    end loop
}

macro save_expoutput {
    $msgToSend = @random ("Logging progress... did we grind or just exist?", "Saving stats... please don't be embarrassing.", "XP, zeny, drops—let's see if we're winning.", "Recording gains... or lack thereof.", "Progress report incoming... brace for impact.", "Logging data... time to see if we slacked.", "Writing down stats... hope it's not a disaster.", "Tracking progress... RNG, don't fail me now!", "Saving results... are we cracked or just coping?", "Bot logs updated. Let's hope it's not pain.")
    do p $msgToSend
    do exp output
}