automacro auto_loot_activation {
    run-once 1
    exclusive 1
    call enable_autoloot
}

macro enable_autoloot {
    do c @autoloot 100
}
automacro ifInventoryContainsItem1 {
    exclusive 1
    run-once 1
    timeout 5
    inventory "Buckler [1]" > 0
    call transferItem
}

automacro ifInventoryContainsItem2 {
    exclusive 1
    run-once 1
    timeout 5
    inventory "Gladius [1]" > 0
    call transferItem
}

macro transferItem {
    $mainCharname = "Stalker1"
    $charname = @eval($::char->{'name'})

    if ($charname != $mainCharname) {
        do ai manual
        $item1 = @inventory(Buckler [1])
        if ($item1 > -1) {
            do p Found a Buckler [1], I will give it to someone else!
            do drop $item1
            do take first
        }

        $item2 = @Inventory(Gladius [3])
        if ($item2 > -1) {  
            do p Found a Gladius [3], I will give it to someone else!
            do drop $item2
            do take first
        }

        do ai auto
        release ifInventoryContainsItem1
        release ifInventoryContainsItem2
    }
}


automacro monsterRefresh {
    monster /NPC/, /NPC Unknown/
    call {
        do c @refresh
        do e hmm
        do p "Refreshing due to unexpected issue."
    }
    timeout 3
}

automacro healAndReturn {
    set macro_delay 0.2
    hp < 15%
    call {
        do p @go geffen
        pause 1
        do e omg
        pause 1
        do move 120 70
        pause 1
        do talk @npc(/Healer/)
        do e lv2
        $mainCharname = "Stalker1"
        $charname = @eval($::char->{'name'})
        if ($charname == $mainCharname) {
            do p "Healed and ready to continue."
        }
    }
    timeout 60
}

automacro check_party_leader {
    exclusive 1
    timeout 600
    call verify_party_leader
}

macro verify_party_leader {
    # Count number of party members
    $numberOfPlayers = @eval(scalar @partyUsersID)
    $i = 0
    while ($i < $numberOfPlayers) as loop
        $charname = @eval($::char->{'name'})
        $charnameParty = @eval($::char->{'party'}{'users'}{@partyUsersID[$i]}{'name'})
        $isAdmin = @eval($::char->{'party'}{'users'}{@partyUsersID[$i]}{'admin'})

        if ($isAdmin == 1) {
            if ($charname == $charnameParty) {
                $msgToSend = @random("He who has a why to live can bear almost any how - Friedrich Nietzsche", "No tree it is said can grow to heaven unless its roots reach down to hell - Carl Jung", "Talent hits a target no one else can hit Genius hits a target no one else can see - Arthur Schopenhauer", "Man is not the lord of beings Man is the shepherd of Being - Martin Heidegger", "Life can only be understood backwards but it must be lived forwards - Soren Kierkegaard", "Man is condemned to be free - Jean-Paul Sartre", "Madness is the exception in individuals but the rule in groups - Friedrich Nietzsche", "Your visions will become clear only when you look into your own heart - Carl Jung", "A man can do what he wants but not want what he wants - Arthur Schopenhauer", "The function of prayer is not to influence God but rather to change the nature of the one who prays - Soren Kierkegaard", "We do not see things as they are we see them as we are - Michel Foucault", "To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment - Ralph Waldo Emerson", "The meeting of two personalities is like the contact of two chemical substances if there is any reaction both are transformed - Carl Jung", "The only way to deal with this life meaningfully is to find ones passion and follow it - Soren Kierkegaard", "Life is the flower for which love is the honey - Victor Hugo", "The only true wisdom is in knowing you know nothing - Socrates", "The unexamined life is not worth living - Socrates", "It is not length of life but depth of life - Ralph Waldo Emerson", "I am not what happened to me I am what I choose to become - Carl Jung", "The first step toward change is awareness The second step is acceptance - Nathaniel Branden", "The only thing we have to fear is fear itself - Franklin D Roosevelt", "Do not go where the path may lead go instead where there is no path and leave a trail - Ralph Waldo Emerson", "The mind is everything What you think you become - Buddha", "Happiness depends upon ourselves - Aristotle", "The only limit to our realization of tomorrow is our doubts of today - Franklin D Roosevelt", "What we achieve inwardly will change outer reality - Plutarch", "In the middle of difficulty lies opportunity - Albert Einstein", "You must be the change you wish to see in the world - Mahatma Gandhi", "There are no accidents in life - John Lennon", "It is never too late to be what you might have been - George Eliot", "A journey of a thousand miles begins with a single step - Lao Tzu")
                do p $msgToSend
                call track_progress
            } else {
                $num = @rand(1, 4)
                if ($num == 1) {
                    do e sry
                }
                if ($num == 2) {
                    do e heh
                }
                if ($num == 3) {
                    do e gg
                }
                if ($num == 4) {
                    do e meh
                }
            }
        }
        $i++
    end loop
}

macro track_progress {
    $timestamp = @eval(my @t = localtime(); my $offset = 1; sprintf("%02d:%02d", $t[2]+$offset, $t[1]))
    do p "Tracking progress as of $timestamp."
    do exp output
}