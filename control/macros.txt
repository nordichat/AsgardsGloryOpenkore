automacro auto_loot_activation {
    run-once 1
    exclusive 1
    call enable_autoloot
}

macro enable_autoloot {
    do c @autoloot 100
}

automacro monsterRefresh {
    monster /NPC/, /NPC Unknown/
    call {
        do c @refresh
        do e hmm
        $msgToSend = @random ("Weird stuff... panic refresh!", "Something's off... hitting @refresh!", "Is this a bug or a feature? Refreshing!", "I don't trust what I just saw. @refresh!", "Reality is glitching. Time to press refresh!", "Classic fix: turn it off and on again!", "Saw something cursed. Cleansing with @refresh!", "If I ignore it and refresh, it never happened!", "Not sure if lag or hallucination. @refresh!", "Me: *sees weird stuff* Also me: *smashes refresh*")
        do p $msgToSend
    }
    timeout 3
}

automacro goHeal {
    hp < 15%
    call {
        do ai manual
        do e omg
        $msgToSend = @random ("MEDIC! I'm dying! Retreating to base!", "Ow ow ow! Time for a tactical retreat!", "I regret all my life choices... running to heal!", "Survival instinct activated! Fleeing to town!", "Nope nope nope! I need a healer!", "BRB, patching myself up before I actually die.")
        do p $msgToSend
        do p @go geffen
        pause 2
        do move 120 70
        pause 1
        do talk @npc(/Healer/)
        do e lv2
        $msgToSend = @random ("I LIVE! Back to the battlefield!", "Patched up and ready to rumble again!", "The gods still have plans for me!", "Fully restored! Now where were we?", "Ah, sweet healing. Now back to work!", "Alright, break's over. Time to hunt again!")
        do p $msgToSend
        do ai auto
    }
    timeout 60
}

automacro check_party_leader {
    exclusive 1
    timeout 600
    call verify_party_leader
}

macro verify_party_leader {
    # Count number of party members
    $numberOfPlayers = @eval(scalar @partyUsersID)
    $i = 0
    while ($i < $numberOfPlayers) as loop
        $charname = @eval($::char->{'name'})
        $charnameParty = @eval($::char->{'party'}{'users'}{@partyUsersID[$i]}{'name'})
        $isAdmin = @eval($::char->{'party'}{'users'}{@partyUsersID[$i]}{'admin'})

        if ($isAdmin == 1) {
            if ($charname == $charnameParty) {
                $msgToSend = @random ("He who has a why to live can bear almost any how - Friedrich Nietzsche", "No tree, it is said, can grow to heaven unless its roots reach down to hell - Carl Jung", "Talent hits a target no one else can hit, Genius hits a target no one else can see - Arthur Schopenhauer", "Man is not the lord of beings, Man is the shepherd of Being - Martin Heidegger", "Life can only be understood backwards, but it must be lived forwards - Soren Kierkegaard", "Man is condemned to be free - Jean-Paul Sartre", "Madness is the exception in individuals but the rule in groups - Friedrich Nietzsche", "Your visions will become clear only when you look into your own heart - Carl Jung", "A man can do what he wants, but not want what he wants - Arthur Schopenhauer", "The function of prayer is not to influence God, but rather to change the nature of the one who prays - Soren Kierkegaard", "We do not see things as they are, we see them as we are - Michel Foucault", "To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment - Ralph Waldo Emerson", "The meeting of two personalities is like the contact of two chemical substances, if there is any reaction, both are transformed - Carl Jung")
                do p $msgToSend
                call save_expoutput
            } else {
                $num = @rand(1, 4)
                if ($num == 1) {
                    do e sry
                }
                if ($num == 2) {
                    do e heh
                }
                if ($num == 3) {
                    do e gg
                }
                if ($num == 4) {
                    do e meh
                }
            }
        }
        $i++
    end loop
}

macro save_expoutput {
    $msgToSend = @random ("Logging progress... did we grind or just exist?", "Saving stats... please don't be embarrassing.", "XP, zeny, drops-let's see if we're winning.", "Recording gains... or lack thereof.", "Progress report incoming... brace for impact.", "Logging data... time to see if we slacked.", "Writing down stats... hope it's not a disaster.", "Tracking progress... RNG, don't fail me now!", "Saving results... are we cracked or just coping?", "Bot logs updated. Let's hope it's not pain.")
    do p $msgToSend
    do exp output
}